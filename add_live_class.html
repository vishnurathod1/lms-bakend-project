<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Add Live Class</title>
    
    <link rel="stylesheet" href="add_live_class.css" />
</head>
<body class="add-live-class-page">
    <main class="add-live-class-main">
        <h1>Add Live Class</h1>
        <form id="live-class-form">
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" required />
            </div>
            <div class="form-group">
                <label for="description">Description:</label>
                <textarea id="description" required></textarea>
            </div>
            <div class="form-group">
                <label for="date">Date:</label>
                <input type="date" id="date" required />
            </div>
            <div class="form-group">
                <label for="time">Time:</label>
                <input type="time" id="time" required />
            </div>
            <div class="form-group">
                <label for="link">Link (e.g., Zoom):</label>
                <input type="url" id="link" placeholder="https://zoom.us/j/..." required />
            </div>
            <div class="form-group">
                <label for="course">Course:</label>
                <select id="course" required>
                    <option value="">Select Course</option>
                </select>
            </div>
            <div class="form-group">
                <label for="trainer">Trainer:</label>
                <input type="text" id="trainer" required />
            </div>
            <div class="form-group">
                <label for="status">Status:</label>
                <select id="status" required>
                    <option value="Scheduled">Scheduled</option>
                    <option value="Completed">Completed</option>
                    <option value="Cancelled">Cancelled</option>
                </select>
            </div>
            <button type="submit" class="submit-btn">Add Live Class</button>
        </form>
    </main>
    <script>
        function getCourses() {
            const courses = localStorage.getItem('courses');
            return courses ? JSON.parse(courses) : [];
        }

        function getLiveClasses() {
            const liveClasses = localStorage.getItem('liveClasses');
            return liveClasses ? JSON.parse(liveClasses) : [];
        }

        function saveLiveClasses(liveClasses) {
            localStorage.setItem('liveClasses', JSON.stringify(liveClasses));
        }

        function populateCourses() {
            const courses = getCourses();
            const courseSelect = document.getElementById('course');
            courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course.title;
                option.textContent = course.title;
                courseSelect.appendChild(option);
            });
        }

        function getCurrentUser() {
            const currentUser = localStorage.getItem('currentUser');
            return currentUser ? JSON.parse(currentUser) : null;
        }

        document.getElementById('live-class-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;
            const link = document.getElementById('link').value.trim();
            const course = document.getElementById('course').value;
            const trainer = document.getElementById('trainer').value.trim();
            const status = document.getElementById('status').value;

            if (!title || !description || !date || !time || !link || !course || !trainer) {
                alert('All fields are required.');
                return;
            }

            const liveClasses = getLiveClasses();
            liveClasses.push({ title, description, date, time, link, course, trainer, status });
            saveLiveClasses(liveClasses);
            alert('Live class added successfully!');
            document.getElementById('live-class-form').reset();
        });

        populateCourses();

        const currentUser = getCurrentUser();
        if (currentUser) {
            document.getElementById('trainer').value = currentUser.name;
        }
    </script>
</body>
</html>
