<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Manage Courses</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
        .add-course-btn{
            display: flex;
            width: 20%;
            padding: 10px 15px;
            justify-content: center; 
            background: #c0b0ec;
            color: black;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
            border: none;
            cursor: pointer;
        }
        .add-course-btn:hover {
            background: #7943db;
            color: rgb(248, 4, 4);
        }
        .data-index{
            display: none;


        }
        #cancel-btn{
            background: #5006fc;
            width: 40%;
        }
        #cancel-btn:hover{
            background: #fd5353;
            color: white;
        }
        #course-form{
            background-color: #faf9fc;
            width: 50%;
        }
        .submit-btn{
            background: #5006fc;
            width: 40%;
        }
        .submit-btn:hover{
            background: #7943db;
            color: black;
        }

    </style>
</head>
<body class="manage-courses-page">
    
    <main class="manage-courses-main">
        <h1>Manage Courses</h1>
        <button class="add-course-btn" onclick="openAddForm()">Add New Course</button>
        <table class="courses-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Trainer</th>
                    <th>Duration (months)</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </main>
    <script>
        function getCourses() {
            const courses = localStorage.getItem('courses');
            return courses ? JSON.parse(courses) : [];
        }

        function saveCourses(courses) {
            localStorage.setItem('courses', JSON.stringify(courses));
        }

        function renderCourses() {
            const courses = getCourses();
            const tbody = document.querySelector('.courses-table tbody');
            tbody.innerHTML = '';
            courses.forEach((course, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${course.title}</td>
                    <td>${course.description}</td>
                    <td>${course.trainer}</td>
                    <td>${course.duration} months</td>
                    <td>${course.status}</td>
                    <td>
                        <button class="edit-btn" data-index="${index}">Edit</button>
                        <button class="delete-btn" data-index="${index}">Delete</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            attachEventListeners();
        }

        function attachEventListeners() {
            document.querySelectorAll('.edit-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    openEditForm(index);
                });
            });
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    deleteCourse(index);
                });
            });
        }

        function openAddForm() {
            const formHtml = `
                <div class="modal">
                    <div class="modal-content">
                        <h2>Add Course</h2>
                        <form id="course-form">
                            <input type="hidden" id="course-index" value="-1" />
                            <div class="form-group">
                                <label for="title">Title:</label>
                                <input type="text" id="title" required />
                            </div>
                            <div class="form-group">
                                <label for="price">Price:</label>
                                <input type="number" id="price" min="0" step="0.01" required />
                            </div>
                            <div class="form-group">
                                <label for="description">Description:</label>
                                <textarea id="description" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="trainer">Trainer:</label>
                                <input type="text" id="trainer" required />
                            </div>
                            <div class="form-group">
                                <label for="duration">Duration (months):</label>
                                <input type="number" id="duration" min="1" placeholder="e.g. 3" required />
                            </div>
                            <div class="form-group">
                                <label for="status">Status:</label>
                                <select id="status" required>
                                    <option value="Active">Active</option>
                                    <option value="Inactive">Inactive</option>
                                </select>
                            </div>
                            <button type="submit" class="submit-btn">Save</button>
                            <button type="button" id="cancel-btn" class="submit-btn">Cancel</button>
                        </form>
                    </div>
                </div>
            `;
            const main = document.querySelector('.manage-courses-main');
            main.insertAdjacentHTML('beforeend', formHtml);
            document.getElementById('cancel-btn').addEventListener('click', closeForm);
            document.getElementById('course-form').addEventListener('submit', saveCourse);
        }

        function openEditForm(index) {
            const courses = getCourses();
            const course = courses[index];
            const formHtml = `
                <div class="modal">
                    <div class="modal-content">
                        <h2>Edit Course</h2>
                        <form id="course-form">
                            <input type="hidden" id="course-index" value="${index}" />
                            <div class="form-group">
                                <label for="title">Title:</label>
                                <input type="text" id="title" value="${course.title}" required />
                            </div>
                            <div class="form-group">
                                <label for="price">Price:</label>
                                <input type="number" id="price" value="${course.price || ''}" min="0" step="0.01" required />
                            </div>
                            <div class="form-group">
                                <label for="description">Description:</label>
                                <textarea id="description" required>${course.description}</textarea>
                            </div>
                            <div class="form-group">
                                <label for="trainer">Trainer:</label>
                                <input type="text" id="trainer" value="${course.trainer}" required />
                            </div>
                            <div class="form-group">
                                <label for="duration">Duration (months):</label>
                                <input type="number" id="duration" min="1" value="${course.duration || ''}" required />
                            </div>
                            <div class="form-group">
                                <label for="status">Status:</label>
                                <select id="status" required>
                                    <option value="Active" ${course.status === 'Active' ? 'selected' : ''}>Active</option>
                                    <option value="Inactive" ${course.status === 'Inactive' ? 'selected' : ''}>Inactive</option>
                                </select>
                            </div>
                            <button type="submit" class="submit-btn">Save</button>
                            <button type="button" id="cancel-btn" class="submit-btn">Cancel</button>
                        </form>
                    </div>
                </div>
            `;
            const main = document.querySelector('.manage-courses-main');
            main.insertAdjacentHTML('beforeend', formHtml);
            document.getElementById('cancel-btn').addEventListener('click', closeForm);
            document.getElementById('course-form').addEventListener('submit', saveCourse);
        }

        function closeForm() {
            const modal = document.querySelector('.modal');
            if (modal) {
                modal.remove();
            }
        }

        function saveCourse(e) {
            e.preventDefault();
            const index = document.getElementById('course-index').value;
            const title = document.getElementById('title').value.trim();
            const price = parseFloat(document.getElementById('price').value);
            const description = document.getElementById('description').value.trim();
            const trainer = document.getElementById('trainer').value.trim();
            const duration = parseInt(document.getElementById('duration').value);
            const status = document.getElementById('status').value;

            if (!title || !description || !trainer || isNaN(duration) || duration < 1 || isNaN(price)) {
                alert('All fields are required, duration must be a positive number, and price must be a number.');
                return;
            }

            const courses = getCourses();
            if (index === '-1') {
                courses.push({ title, price, description, trainer, duration, status });
            } else {
                courses[index] = { title, price, description, trainer, duration, status };
            }
            saveCourses(courses);
            closeForm();
            renderCourses();
        }

        function deleteCourse(index) {
            if (confirm('Are you sure you want to delete this course?')) {
                const courses = getCourses();
                courses.splice(index, 1);
                saveCourses(courses);
                renderCourses();
            }
        }

        // Initial render
        renderCourses();
    </script>
</body>
</html>
